<section
  class="overflow-y-hidden bg-[url('/img/Polygon_Luminary.svg')] bg-cover bg-center bg-no-repeat"
>
  <div class="relative h-screen w-full backdrop-blur-[6px]">
    <a
      href="/products"
      class="block absolute left-28 top-24 group transition-all"
    >
      <i class="bi bi-arrow-left-circle text-slate-200 text-5xl"></i>
      <span
        class="group-hover:scale-y-100 group-hover:translate-y-0 scale-y-0 -translate-y-10 scale-x-0 group-hover:scale-x-100 origin-top absolute -bottom-12 right-1/2 translate-x-1/2 text-center text-slate-200 rounded-lg w-32 border-2 border-slate-200/60 bg-slate-700 transition-all"
        >Back to Index</span
      >
    </a>
    <div class="mx-auto w-10/12 px-[7%] py-10">
      <h1 class="mb-6 text-3xl font-semibold text-slate-200">
        Edit existing product
      </h1>

      <!-- ini buat au apaan -->
      <form
        action="/products/edit/<%= product._id %>/<%= product.garment %>?_method=PUT"
        method="POST"
      >
        <div
          class="custom-scrollbar mx-auto h-[80vh] max-h-[80vh] space-y-4 overflow-y-auto rounded-lg bg-bgProducts px-[3%] py-10 border-2 border-slate-500 shadow-sm shadow-slate-500"
        >
          <!-- ini buat form inputan -->
          <div
            class="mx-auto flex w-[90%] items-center justify-between overflow-hidden rounded-lg border-2 border-gray-700 bg-zinc-100"
          >
            <label
              for="name"
              class="h-full w-28 bg-gray-700 px-4 py-2 font-semibold text-white"
              >Name</label
            >
            <input
              type="text"
              name="name"
              id="name"
              placeholder="Name of product"
              class="w-full bg-transparent px-4 py-1 focus:outline-none"
              value="<%= product.name %>"
              required
            />
          </div>

          <div
            class="mx-auto flex w-[90%] items-center justify-between overflow-hidden rounded-lg border-2 border-gray-700 bg-zinc-100"
          >
            <label
              for="brand"
              class="h-full w-28 bg-gray-700 px-4 py-2 font-semibold text-white"
              >Brand</label
            >
            <input
              type="text"
              name="brand"
              id="brand"
              placeholder="Brand of product"
              value="<%= product.brand %>"
              class="w-full bg-transparent px-4 py-1 focus:outline-none"
            />
          </div>

          <div
            class="mx-auto flex w-[90%] items-center justify-between overflow-hidden rounded-lg border-2 border-gray-700 bg-zinc-100"
          >
            <label
              for="price"
              class="h-full w-28 bg-gray-700 px-4 py-2 font-semibold text-white"
              >Price</label
            >
            <input
              type="number"
              name="price"
              min="0"
              id="price"
              required
              placeholder="Price of product"
              value="<%= product.price %>"
              class="w-full bg-transparent px-4 py-1 focus:outline-none"
            />
            <span
              for="price"
              class="h-full bg-gray-700 px-4 py-2 font-light text-white"
              >,00</span
            >
          </div>

          <div
            class="mx-auto flex w-[90%] items-center justify-between overflow-hidden rounded-lg border-2 border-gray-700 bg-zinc-100"
          >
            <label
              for="stock"
              class="h-full w-28 bg-gray-700 px-4 py-2 font-semibold text-white"
              >Stock</label
            >
            <input
              type="number"
              name="stock"
              min="0"
              id="brand"
              placeholder="Stock of product"
              value="<%= product.stock %>"
              class="w-full bg-transparent px-4 py-1 focus:outline-none"
            />
          </div>

          <% product.size.forEach(s => { %>
          <div
            class="mx-auto flex w-[90%] items-center justify-between overflow-hidden rounded-lg border-2 border-gray-700 bg-zinc-100"
          >
            <label
              for="size"
              class="h-full w-28 bg-gray-700 px-4 py-2 font-semibold text-white"
              >Size</label
            >
            <select
              name="size[]"
              id="size"
              class="w-full bg-transparent px-4 py-1 focus:outline-none"
            >
            <option disabled>Choose Size</option>
              <% sizes.map((size) => { %>
                <option 
                  value="<%= size %>" 
                  <%= (s === size) ? 'selected' : '' %>
                >
                  <%= size %>
                </option>
              <% }) %>
            </select>
            <div class="flex h-full ml-2">
              <button
                type="button"
                class="bg-green-500 text-black font-semibold hover:bg-green-500 focus:bg-green-400 focus:outline-none px-4 py-2 addSizeBtn"
              >
                Add
              </button>
              <button
                type="button"
                class="bg-red-600 hover:bg-red-500 text-slate-100 font-semibold focus:bg-red-500 focus:outline-none px-4 py-2 removeSizeBtn"
              >
                Remove
              </button>
            </div>
          </div>
          <% }) %>
          <div
            class="mx-auto flex w-[90%] items-center justify-between overflow-hidden rounded-lg border-2 border-gray-700 bg-zinc-100"
          >
            <label
              for="category"
              class="h-full bg-gray-700 w-28 px-4 py-2 font-semibold text-white"
              >Category</label
            >
            <select
              name="category"
              id="category"
              class="w-full bg-transparent px-4 py-1 focus:outline-none"
            >
              <option disabled selected>Choose category of product</option>
              <% categories.forEach((category) => { %>
                <option
                  value="<%= category %>"
                  <%= product.category === category ? 'selected' : '' %> 
                >
                  <%= category %>
                </option>
              <% }); %>
            </select>
          </div>

          <div
            class="mx-auto flex w-[90%] items-center justify-between overflow-hidden rounded-lg border-2 border-gray-700 bg-zinc-100"
          >
            <label
              for="description"
              class="h-full bg-gray-700 w-28 px-4 py-2 font-semibold text-white"
              >Description</label
            >
            <input
              type="text"
              name="description"
              id="description"
              placeholder="description of product"
              value="<%= product.description %>"
              class="w-full bg-transparent px-4 py-1 focus:outline-none"
            />
          </div>
          <!--  -->
          <div
            class="mx-auto flex w-[90%] items-center justify-between overflow-hidden rounded-lg border-2 border-gray-700 bg-zinc-100"
          >
            <label
              for="garment"
              class="h-full bg-gray-700 w-28 px-4 py-2 font-semibold text-white"
              >Garment</label
            >
            <select
              name="garment"
              id="garment"
              class="w-full bg-transparent px-4 py-1 focus:outline-none"
            >
              <option disabled>Choose garment's location of product</option>
              <% garments.forEach((garment) => { %>
                <option 
                  value="<%= garment._id %>" 
                  <%= garment._id.equals(product.garment) ? `selected` : `` %> 
                >
                  <%= garment.name %>
                </option>
              <% }) %>
            </select>
          </div>

          <button
            type="submit"
            class="bg-blue-600 hover:bg-blue-500 focus:bg-blue-500 focus:outline-none px-4 py-2 mt-20 w-1/3 block rounded-lg mx-auto text-slate-200 tracking-wider font-semibold border-sky-950 border shadow-md shadow-sky-600/70"
          >
            SUBMIT
          </button>
        </div>
      </form>
      <span class="text-sm font-light italic text-slate-500">
        *
        <a href="/garments/create" class="text-blue-400 underline"
          >Create new Garment</a
        >
        first if you want a new Garment.</span
      >
    </div>
  </div>
</section>
